---
import SiteLayout from "../../layouts/SiteLayout.astro";
import BackNav from "../../components/BackNav.astro";
import { getCollection } from "astro:content";

const downloads = (await getCollection("downloads"))
  .filter((item: any) => !item.data.draft)
  .sort((a: any, b: any) => a.data.order - b.data.order);
---

<SiteLayout title="Download | Erland Ramdhani" selectedItem="download">
  <BackNav href="/" label="Back" />
  <div class="content-container">
    <h1>Download</h1>
    <div class="download-intro">
      <p>
        Melalui halaman ini, kalian dapat mengunduh berbagai macam file yang saya bagikan secara gratis. Download dengan mudah hanya dengan sekali klik, file akan otomatis terunduh ke perangkat kalian tanpa perlu melewati halaman safelink.
      </p>
      <p>
        Semoga apa yang saya bagikan di sini dapat bermanfaat untuk orang banyak!
      </p>
    </div>
    <section class="download-grid">
      {downloads.map((item: any) => {
        const data = item.data;
        const thumbSrc = data.hero ? data.hero.src : "/assets/erland-icon.svg";
        const thumbWidth = data.hero?.width ?? 240;
        const thumbHeight = data.hero?.height ?? 180;
        const alt = data.heroAlt ?? data.title;
        const detailHref = `/download/${item.slug}/`;
        return (
          <article class="download-card">
            <a href={detailHref} class="download-card-thumb" aria-label={`Buka halaman ${data.title}`}>
              <img
                src={thumbSrc}
                width={thumbWidth}
                height={thumbHeight}
                alt={alt}
                loading="lazy"
              />
            </a>
            <div class="download-card-body">
              <h3 class="download-card-title">
                <a href={detailHref}>{data.title}</a>
              </h3>
              <p class="download-card-desc">{data.excerpt ?? data.description}</p>
              <div class="download-card-actions">
                <a class="button download-card-button" href={detailHref}>
                  <svg class="download-card-button-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M14.7928932,11.5 L11.6464466,8.35355339 C11.4511845,8.15829124 11.4511845,7.84170876 11.6464466,7.64644661 C11.8417088,7.45118446 12.1582912,7.45118446 12.3535534,7.64644661 L16.3535534,11.6464466 C16.5488155,11.8417088 16.5488155,12.1582912 16.3535534,12.3535534 L12.3535534,16.3535534 C12.1582912,16.5488155 11.8417088,16.5488155 11.6464466,16.3535534 C11.4511845,16.1582912 11.4511845,15.8417088 11.6464466,15.6464466 L14.7928932,12.5 L4,12.5 C3.72385763,12.5 3.5,12.2761424 3.5,12 C3.5,11.7238576 3.72385763,11.5 4,11.5 L14.7928932,11.5 Z M16,4.5 C15.7238576,4.5 15.5,4.27614237 15.5,4 C15.5,3.72385763 15.7238576,3.5 16,3.5 L19,3.5 C20.3807119,3.5 21.5,4.61928813 21.5,6 L21.5,18 C21.5,19.3807119 20.3807119,20.5 19,20.5 L16,20.5 C15.7238576,20.5 15.5,20.2761424 15.5,20 C15.5,19.7238576 15.7238576,19.5 16,19.5 L19,19.5 C19.8284271,19.5 20.5,18.8284271 20.5,18 L20.5,6 C20.5,5.17157288 19.8284271,4.5 19,4.5 L16,4.5 Z" transform="rotate(90 12.5 12)"/>
                  </svg>
                  {data.ctaLabel}
                </a>
              </div>
            </div>
          </article>
        );
      })}
    </section>
  </div>
</SiteLayout>
