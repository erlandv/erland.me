/* Import navigation scaffold utilities */
@import '../../styles/utilities/navigation.css';

/* Global Sidebar states and transitions migrated from <style is:global> */

:root {
  --sidebar-expanded-width: 300px;
  --sidebar-collapsed-width: 100px;
  --sidebar-collapsed-item-width: 70px;
  --sidebar-collapsed-item-padding: var(--space-3);
  --sidebar-section-gap: 36px;
  /* --sidebar-init-transition: Set by inline <head> script to 'none' during 
     initial load to prevent FOUC on soft reload. Removed by SidebarController 
     after state is applied. When undefined, CSS transitions work normally. */
}

.sidebar {
  width: var(--sidebar-expanded-width);
  height: 100vh;
  background-color: var(--bg-overlay);
  border-right: 1px solid var(--border-color);
  padding: 32px;
  flex-shrink: 0;
  position: sticky;
  top: 0;
  overflow-y: auto;
  overflow-x: hidden;
  transition: var(
    --sidebar-init-transition,
    width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94),
    padding 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)
  );
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  contain: layout style;
}

.nav-content {
  width: 100%;
  height: 100%;
  grid-column-gap: var(--sidebar-section-gap-fixed);
  grid-row-gap: var(--sidebar-section-gap-fixed);
  flex-direction: column;
  display: flex;
}

.label-white {
  color: var(--text-primary);
  margin-bottom: 2px;
  font-size: clamp(16px, 2.5vw, 18px);
  line-height: 1.5;
  font-weight: 600;
}

.label-gray {
  color: var(--text-gray);
  font-size: clamp(14px, 2vw, 16px);
  line-height: 1.4;
  font-weight: 400;
}

.niv-data {
  align-items: center;
  display: flex;
}

.niv-image {
  width: 48px;
  height: 48px;
  border: 1px solid var(--border-color);
  border-radius: 100px;
}

body:has(.sidebar .nav-toggle:checked) {
  overflow: hidden;
  touch-action: none;
}

.sidebar {
  transition: var(
    --sidebar-init-transition,
    width var(--dur-slow) var(--ease-standard),
    padding var(--dur-slow) var(--ease-standard)
  );
  overflow-x: hidden;
}

:is(
    html.sidebar-collapsed-global,
    html[data-sidebar='collapsed'],
    body.sidebar-collapsed
  )
  .sidebar {
  width: var(--sidebar-collapsed-width);
  padding: var(--space-8) var(--space-2);
}

.sidebar .nav-link-container {
  box-sizing: border-box;
  transition: var(
    --sidebar-init-transition,
    width var(--dur-medium) var(--ease-standard),
    padding var(--dur-medium) var(--ease-standard),
    margin var(--dur-medium) var(--ease-standard),
    background-color 180ms var(--ease-standard),
    border-color 180ms var(--ease-standard),
    transform 180ms var(--ease-standard)
  );
}

.sidebar .profile-text,
.sidebar .nav-text {
  font-family:
    'Agave Nerd Font', ui-monospace, 'Cascadia Code', Menlo, Consolas,
    'Courier New', monospace;
  opacity: 1;
  max-width: 220px;
  inline-size: auto;
  white-space: nowrap;
  overflow: hidden;
  transition: var(
    --sidebar-init-transition,
    opacity 200ms var(--ease-standard)
  );
  will-change: opacity;
}

:is(
    html.sidebar-collapsed-global,
    html[data-sidebar='collapsed'],
    body.sidebar-collapsed
  )
  .sidebar
  .profile-text,
:is(
    html.sidebar-collapsed-global,
    html[data-sidebar='collapsed'],
    body.sidebar-collapsed
  )
  .sidebar
  .nav-text {
  opacity: 0;
  max-width: 0;
  visibility: hidden;
  pointer-events: none;
}

.sidebar .socials--sidebar,
.sidebar .socials--menu {
  opacity: 1;
  max-height: 200px;
  transition: var(
    --sidebar-init-transition,
    opacity var(--dur-medium) var(--ease-standard),
    max-height 240ms var(--ease-standard),
    padding-top 240ms var(--ease-standard),
    border-color 240ms var(--ease-standard)
  );
  will-change: opacity, max-height;
  overflow: hidden;
}

:is(
    html.sidebar-collapsed-global,
    html[data-sidebar='collapsed'],
    body.sidebar-collapsed
  )
  .sidebar
  .socials--sidebar,
:is(
    html.sidebar-collapsed-global,
    html[data-sidebar='collapsed'],
    body.sidebar-collapsed
  )
  .sidebar
  .socials--menu {
  opacity: 0;
  max-height: 0;
  padding-top: 0;
  border-top-color: transparent;
}

.sidebar.sidebar-animating.hiding-text .profile-text,
.sidebar.sidebar-animating.hiding-text .nav-text {
  opacity: 0;
  max-width: 0;
}

.sidebar.sidebar-animating.hiding-text .socials--sidebar,
.sidebar.sidebar-animating.hiding-text .socials--menu {
  opacity: 0;
  max-height: 0;
  padding-top: 0;
  border-top-color: transparent;
}

:is(.sidebar.sidebar-collapsed, .sidebar:has(#sidebar-toggle:checked)) {
  width: var(--sidebar-collapsed-width);
  padding: var(--space-8) var(--space-2);
}

:is(.sidebar.sidebar-collapsed, .sidebar:has(#sidebar-toggle:checked))
  .profile-text,
:is(.sidebar.sidebar-collapsed, .sidebar:has(#sidebar-toggle:checked))
  .nav-text {
  opacity: 0;
  max-width: 0;
}

:is(.sidebar.sidebar-collapsed, .sidebar:has(#sidebar-toggle:checked))
  .socials--sidebar {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  margin-top: auto !important;
  border-top-color: transparent;
  padding-top: 32px;
  min-height: 71px;
}

:is(.sidebar.sidebar-collapsed, .sidebar:has(#sidebar-toggle:checked))
  .socials--menu {
  opacity: 0;
  max-height: 0;
  padding-top: 0;
  border-top-color: transparent;
}

:is(
    html.sidebar-collapsed-global,
    html[data-sidebar='collapsed'],
    body.sidebar-collapsed
  )
  .sidebar
  .sidebar-profile-header {
  justify-content: center !important;
}

:is(.sidebar.sidebar-collapsed, .sidebar:has(#sidebar-toggle:checked))
  .sidebar-profile-header {
  justify-content: center !important;
}

:is(
    html.sidebar-collapsed-global,
    html[data-sidebar='collapsed'],
    body.sidebar-collapsed
  )
  .sidebar
  .nav-content,
:is(.sidebar.sidebar-collapsed, .sidebar:has(#sidebar-toggle:checked))
  .nav-content {
  grid-row-gap: var(--sidebar-section-gap-fixed) !important;
  row-gap: var(--sidebar-section-gap-fixed) !important;
  grid-column-gap: var(--sidebar-section-gap-fixed) !important;
  column-gap: var(--sidebar-section-gap-fixed) !important;
}

:is(.sidebar.sidebar-collapsed, .sidebar:has(#sidebar-toggle:checked))
  .niv-data {
  justify-content: center !important;
  align-items: center !important;
}

:is(.sidebar.sidebar-collapsed, .sidebar:has(#sidebar-toggle:checked))
  .niv-image {
  margin-right: 0 !important;
  margin: 0 auto !important;
}

:is(.sidebar.sidebar-collapsed, .sidebar:has(#sidebar-toggle:checked))
  .nav-link-container {
  justify-content: center !important;
  align-items: center !important;
  padding: var(--sidebar-collapsed-item-padding) !important;
  min-height: 44px !important;
  width: var(--sidebar-collapsed-item-width) !important;
  margin-left: auto !important;
  margin-right: auto !important;
  gap: 0 !important;
  transition: var(
    --sidebar-init-transition,
    width var(--dur-medium) var(--ease-standard),
    padding var(--dur-medium) var(--ease-standard),
    margin var(--dur-medium) var(--ease-standard),
    gap var(--dur-medium) var(--ease-standard)
  );
}

.sidebar.sidebar-collapsed .nav-link-image {
  margin: 0 auto !important;
}

.sidebar.sidebar-collapsed .nav-text {
  pointer-events: none;
}

.sidebar.sidebar-collapsed .sidebar-nav {
  align-items: flex-start !important;
}

/* Ensure the nav menu inside sidebar uses a vertical flex layout by default */
:global(.sidebar) :global(.sidebar-nav) {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
