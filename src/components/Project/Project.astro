---
import styles from './project.module.css';

const { title, desc, highlights = [], tech } = Astro.props;
const paragraphs: string[] =
  typeof desc === 'string'
    ? desc.split(/\n\s*\n/)
        .map(p => p.trim())
        .filter(Boolean)
    : [];
---

<div class={styles["single-item"]}>
  <h2>{title}</h2>
  <div class:list={[styles["project-desc"]]}>
    {paragraphs.length > 0 ? paragraphs.map((p: string) => <p>{p}</p>) : <p>{desc}</p>}
  </div>
  {highlights.length > 0 && (
    <>
      <h3>Highlights</h3>
      <div class:list={[styles["project-desc"], styles["project-desc-list"]]}>
        <ul role="list">
          {highlights.map((item: string) => <li>{item}</li>)}
        </ul>
      </div>
    </>
  )}
  <div class={styles["mini-label-white"]}>Technologies &amp; tools</div>
  <div class={styles["chips-container"]}>
    {tech.map((techItem: string) => <div class={styles["single-chip"]}>{techItem}</div>)}
  </div>
</div>
