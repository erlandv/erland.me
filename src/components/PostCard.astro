---
import Icon from "./Icon.astro";
import styles from "./PostCard/post-card.module.css";

interface Hero {
  src: string;
  width: number;
  height: number;
}

interface Props {
  href: string;
  title: string;
  hero?: Hero | null;
  alt: string;
  category?: string | null;
  dateLabel?: string | null;
  excerpt?: string | null;
}

const { href, title, hero, alt, category, dateLabel, excerpt } = Astro.props as Props;
---

<article class:list={[styles['resource-card'], 'resource-card', 'post-card']}>
  <div class={styles["post-card__inner"]}>
    <div class={styles["post-card__thumb"]}>
      {hero ? (
        <img
          src={hero.src}
          width={hero.width}
          height={hero.height}
          alt={alt}
          loading="lazy"
          class={styles["post-card__img"]}
        />
      ) : (
        <div class={styles["post-card__thumb--placeholder"]} aria-hidden="true"></div>
      )}
    </div>
    <div class={styles["post-card__body"]}>
      <header class={styles["post-card__header"]}>
        <h2 class={styles["post-card__title"]}>
          <a href={href} class={styles["post-card__title-link"]}>{title}</a>
        </h2>
        <div class={styles["post-card__meta"]}>
          {category && (
            <div class={styles["post-card__meta-item"]}>
              <Icon name="tags" class={styles["post-card__meta-icon"]} />
              <span class={styles["post-card__category"]}>{category}</span>
            </div>
          )}
          {dateLabel && (
            <div class={styles["post-card__meta-item"]}>
              <Icon name="date" class={styles["post-card__meta-icon"]} />
              <time class={styles["post-card__date"]}>{dateLabel}</time>
            </div>
          )}
        </div>
      </header>
      {excerpt && <p class={styles["post-card__excerpt"]}>{excerpt}</p>}
      <a href={href} class={styles["post-card__readmore"]}>
        <span>Read more</span>
        <Icon name="readmore" class={styles["post-card__readmore-icon"]} />
      </a>
    </div>
  </div>
</article>
